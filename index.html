<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>
</head>

<body>
    <div id="vis"></div>

    <script>

        var config = {
            $schema: "https://vega.github.io/schema/vega-lite/v4.json",
            width: window.innerWidth * 0.9,
            height: window.innerHeight * 0.9,
            autosize: {
                type: 'fit',
                contains: 'content'
            },
            title: { text: "More than 180,000 terrorist attacks worldwide, 1970-2017", fontSize: 25, fontWeight: 'bold' },

            layer: [
                {
                    data: {
                        url: "terroris.json",
                        format: { type: "topojson", feature: "custom" },
                    },
                    projection: { type: "mercator" },
                    mark: { type: "geoshape", fill: "#eeeeee", stroke: "#3a4750" },
                },
                {
                    data: {
                        url: "terroris.csv",
                    },
                    encoding: {
                        longitude: {
                            field: "longitude",
                            type: "quantitative",
                        },
                        latitude: {
                            field: "latitude",
                            type: "quantitative",
                        },
                    },
                    layer: [
                        {
                            mark: { type: "circle" },
                            encoding: {
                                size: {
                                    aggregate: "count",
                                    scale: { domain: [0, 6000], range: [0, 1000] },
                                },
                                fill: { aggregate: "country_txt", value: "#d72323" },
                                stroke: { value: "gray" },
                                strokeOpacity: { value: 0.1 },
                                opacity: { value: 0.6 },
                            },
                        },
                    ],
                },
            ],
        };
        vegaEmbed("#vis", config);

    </script>

</body>

</html>